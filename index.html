<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Chmod Calculator</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/custom.css" rel="stylesheet" />
  </head>
  <body>
    <header>
      <div class="header-con">
        <div class="logo">Chmod Calculator</div>
        <p>All Permissions</p>
      </div>
    </header>

    <div class="row main">
      <div>
        <form class="form chmod">
          <div class="flex">
            <div class="flex-col">
              <h3>Owner</h3>
              <div class="form-group form-group-lg">
                <label class="control-label"
                  >Read
                  <input class="m apple-switch" id="c-o-r" type="checkbox" />
                </label>
              </div>
              <div class="form-group form-group-lg">
                <label class="control-label"
                  >Write
                  <input class="m apple-switch" id="c-o-w" type="checkbox" />
                </label>
              </div>
              <div class="form-group form-group-lg">
                <label class="control-label"
                  >Execute
                  <input class="m apple-switch" id="c-o-x" type="checkbox" />
                </label>
              </div>
            </div>
            <div class="flex-col">
              <h3>Group</h3>

              <div class="form-group form-group-lg">
                <label class="control-label"
                  >Read
                  <input class="m apple-switch" id="c-g-r" type="checkbox" />
                </label>
              </div>
              <div class="form-group form-group-lg">
                <label class="control-label"
                  >Write
                  <input class="m apple-switch" id="c-g-w" type="checkbox" />
                </label>
              </div>
              <div class="form-group form-group-lg">
                <label class="control-label"
                  >Execute
                  <input class="m apple-switch" id="c-g-x" type="checkbox" />
                </label>
              </div>
            </div>
            <div class="flex-col">
              <h3>Public</h3>
              <div class="form-group form-group-lg">
                <label class="control-label"
                  >Read
                  <input class="m apple-switch" id="c-p-r" type="checkbox" />
                </label>
              </div>
              <div class="form-group form-group-lg">
                <label class="control-label"
                  >Write
                  <input class="m apple-switch" id="c-p-w" type="checkbox" />
                </label>
              </div>
              <div class="form-group form-group-lg">
                <label class="control-label"
                  >Execute
                  <input class="m apple-switch" id="c-p-x" type="checkbox" />
                </label>
              </div>
            </div>
          </div>
          <div class="permission-con">
            <div class="permission">
              <div class="linux-permissions">
                <div>
                  <label for="c-oct">Linux Permissions:</label>
                </div>
                <div class="flex">
                  <div class="padding-top">
                    <input
                      type="text"
                      class="form-control input-lg m"
                      id="c-oct"
                      placeholder="0666"
                    />
                  </div>
                  <div class="padding-top">
                    <input
                      type="text"
                      class="form-control input-lg m"
                      id="c-sym"
                      placeholder="-rw-rw-rw-"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="col-xs-12 col-sm-12 col-md-3 col-lg-4">
        <!-- Ad Here -->
      </div>
    </div>

    <script src="js/jquery.min.js"></script>

    <script src="js/bootstrap.min.js"></script>
    <script>
      (function ($) {
        $("input[type='checkbox']").prop({ checked: false });
        $("#c-sym").val("");
        $("#c-oct").val("");
        $(".m").change(function (e) {
          var target = $(e.target);
          switch (true) {
            case target.is("#c-oct"):
              $("input[type='checkbox']").prop({ checked: false });
              $("#c-sym").val("");
              var chmod = $.trim(target.val());
              var chmodLength = chmod.length;

              var chmodsym = "";
              var valid = true;

              target.parent().removeClass("has-error");
              $("#c-sym").parent().removeClass("has-error");

              if (!isNumber(chmod)) {
                valid = false;
              }
              if (chmodLength == 3) {
                if (chmod.charAt(0) < 0 || chmod.charAt(0) > 7) {
                  valid = false;
                }
                if (chmod.charAt(1) < 0 || chmod.charAt(1) > 7) {
                  valid = false;
                }
                if (chmod.charAt(2) < 0 || chmod.charAt(2) > 7) {
                  valid = false;
                }
              } else {
                valid = false;
              }

              if (valid) {
                if (chmod >= 400) {
                  $("#c-o-r").prop("checked", true);
                  chmod -= 400;
                  chmodsym += "r";
                } else {
                  chmodsym += "-";
                }
                if (chmod >= 200) {
                  $("#c-o-w").prop("checked", true);
                  chmod -= 200;
                  chmodsym += "w";
                } else {
                  chmodsym += "-";
                }
                if (chmod >= 100) {
                  $("#c-o-x").prop("checked", true);
                  chmod -= 100;
                  chmodsym += "x";
                } else {
                  chmodsym += "-";
                }

                if (chmod >= 40) {
                  $("#c-g-r").prop("checked", true);
                  chmod -= 40;
                  chmodsym += "r";
                } else {
                  chmodsym += "-";
                }
                if (chmod >= 20) {
                  $("#c-g-w").prop("checked", true);
                  chmod -= 20;
                  chmodsym += "w";
                } else {
                  chmodsym += "-";
                }
                if (chmod >= 10) {
                  $("#c-g-x").prop("checked", true);
                  chmod -= 10;
                  chmodsym += "x";
                } else {
                  chmodsym += "-";
                }

                if (chmod >= 4) {
                  $("#c-p-r").prop("checked", true);
                  chmod -= 4;
                  chmodsym += "r";
                } else {
                  chmodsym += "-";
                }
                if (chmod >= 2) {
                  $("#c-p-w").prop("checked", true);
                  chmod -= 2;
                  chmodsym += "w";
                } else {
                  chmodsym += "-";
                }
                if (chmod >= 1) {
                  $("#c-p-x").prop("checked", true);
                  chmod -= 1;
                  chmodsym += "x";
                } else {
                  chmodsym += "-";
                }
              } else {
                target.parent().addClass("has-error");
                $("#c-sym").val("");
              }

              break;

            case target.is("input[type='checkbox']"):
              var chmodsym = "";
              var chmod = 0;
              $("#c-sym").parent().removeClass("has-error");
              $("#c-oct").parent().removeClass("has-error");

              if ($("#c-o-r").prop("checked")) {
                chmod += 400;
                chmodsym += "r";
              } else {
                chmodsym += "-";
              }
              if ($("#c-o-w").prop("checked")) {
                chmod += 200;
                chmodsym += "w";
              } else {
                chmodsym += "-";
              }
              if ($("#c-o-x").prop("checked")) {
                chmod += 100;
                chmodsym += "x";
              } else {
                chmodsym += "-";
              }

              if ($("#c-g-r").prop("checked")) {
                chmod += 40;
                chmodsym += "r";
              } else {
                chmodsym += "-";
              }
              if ($("#c-g-w").prop("checked")) {
                chmod += 20;
                chmodsym += "w";
              } else {
                chmodsym += "-";
              }
              if ($("#c-g-x").prop("checked")) {
                chmod += 10;
                chmodsym += "x";
              } else {
                chmodsym += "-";
              }

              if ($("#c-p-r").prop("checked")) {
                chmod += 4;
                chmodsym += "r";
              } else {
                chmodsym += "-";
              }
              if ($("#c-p-w").prop("checked")) {
                chmod += 2;
                chmodsym += "w";
              } else {
                chmodsym += "-";
              }
              if ($("#c-p-x").prop("checked")) {
                chmod += 1;
                chmodsym += "x";
              } else {
                chmodsym += "-";
              }

              if (chmod < 10) {
                chmod = "00" + "" + chmod;
              } else if (chmod < 100) {
                chmod = "0" + "" + chmod;
              }
              $("#c-oct").val(chmod);
              $("#c-sym").val(chmodsym);

              break;

            case target.is("#c-sym"):
              $("input[type='checkbox']").prop({ checked: false });
              var chmod = 0;
              var chmodsym = $.trim(target.val());
              var chmodsymLength = chmodsym.length;

              var valid = true;

              target.parent().removeClass("has-error");
              $("#c-oct").parent().removeClass("has-error");

              if (chmodsymLength == 10) {
                if (chmodsym.charAt(0) == "d") {
                  chmodsym = chmodsym.substring(1);
                  chmodsymLength = chmodsym.length;
                } else if (chmodsym.charAt(0) == "-") {
                  chmodsym = chmodsym.substring(1);
                  chmodsymLength = chmodsym.length;
                } else {
                  valid = false;
                }
              }
              if (chmodsymLength == 9) {
                if (chmodsym.charAt(0) == "r") {
                  $("#c-o-r").prop("checked", true);
                  chmod += 400;
                } else if (chmodsym.charAt(0) != "-") {
                  valid = false;
                }
                if (chmodsym.charAt(1) == "w") {
                  $("#c-o-w").prop("checked", true);
                  chmod += 200;
                } else if (chmodsym.charAt(1) != "-") {
                  valid = false;
                }
                if (chmodsym.charAt(2) == "x") {
                  $("#c-o-x").prop("checked", true);
                  chmod += 100;
                } else if (chmodsym.charAt(2) != "-") {
                  valid = false;
                }

                if (chmodsym.charAt(3) == "r") {
                  $("#c-g-r").prop("checked", true);
                  chmod += 40;
                } else if (chmodsym.charAt(3) != "-") {
                  valid = false;
                }
                if (chmodsym.charAt(4) == "w") {
                  $("#c-g-w").prop("checked", true);
                  chmod += 20;
                } else if (chmodsym.charAt(4) != "-") {
                  valid = false;
                }
                if (chmodsym.charAt(5) == "x") {
                  $("#c-g-x").prop("checked", true);
                  chmod += 10;
                } else if (chmodsym.charAt(5) != "-") {
                  valid = false;
                }

                if (chmodsym.charAt(6) == "r") {
                  $("#c-p-r").prop("checked", true);
                  chmod += 4;
                } else if (chmodsym.charAt(6) != "-") {
                  valid = false;
                }
                if (chmodsym.charAt(7) == "w") {
                  $("#c-p-w").prop("checked", true);
                  chmod += 2;
                } else if (chmodsym.charAt(7) != "-") {
                  valid = false;
                }
                if (chmodsym.charAt(8) == "x") {
                  $("#c-p-x").prop("checked", true);
                  chmod += 1;
                } else if (chmodsym.charAt(8) != "-") {
                  valid = false;
                }
              } else {
                valid = false;
              }
              if (valid) {
                $("#c-oct").val(chmod);
              } else {
                target.parent().addClass("has-error");
                $("#c-oct").val("");
              }
              break;
          }
        });
        function isNumber(n) {
          return !isNaN(parseFloat(n)) && isFinite(n);
        }
      })(jQuery);
    </script>
  </body>
</html>
